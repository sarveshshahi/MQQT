<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Local Variable</title>
      <style>
         body {
         font-family: Arial, sans-serif;
         margin: 0;
         padding: 0;
         color: black;
         width: 100%
         }
         .box {
         height: 700px;
         margin: 0 auto;
         text-align: center;
         border: 1px solid ;
         color: black;
         }
         .mainhead .headtd{
         overflow: hidden; 
         text-overflow: ellipsis; 
         word-wrap: break-word;
         }
         .ss { 
         table-layout:fixed;
         }
         .ss .itd{
         overflow: hidden; 
         text-overflow: ellipsis; 
         word-wrap: break-word;
         }
         .ss .ittr{
         overflow: hidden; 
         text-overflow: ellipsis; 
         word-wrap: break-word;
         }
         table, th, td {
         border-collapse: collapse;
         }
         .print-format.print-format-preview{
         padding:20px !important;
         }
         .center-tag{
         margin-top:-2px;
         }
         .QR{
         width: 100px; 
         /*text-align: center; */
         /*position:absolute; */
         /*left:430px; */
         /*top:810px;*/
         }
      </style>
   </head>
  
   {% if doc.is_return == 1 %}
   <body>
       <div class="container page-break">
         <div class="invoice-type">(original)</div>
     <center class="center-tag">
         <h3 style="margin:0; padding:0;">CREDIT NOTE</h3>
         <h6 style="margin-bottom:0; font-size:9px;">(UNDER SEC. 31 OF CGST ACT 2017, RULE 46 OF CGST RULE 2017 STATE GST ACT & RULE)</h6>
      </center>
      <!--<div>-->
      <!--<h6 style="margin-bottom:0; font-size:9px; text-align:right;">{{doc.invoice_copy}}</h6></div>-->
    <div class="Main" style="display:flex; justify-content:space-between;">
          <div style="display:flex; flex-direction:row;">
         <div>
            <img src="/files/Logo_Unique Lables5c63ed.jpg" alt="Unique Labels Logo" style="width: 95px; height: 119px; margin:-3px 5px 0px 2px;" />
         </div>
         <div>
            <p style="font-weight: bold; color: black; font-size: 18px;">UNIQUE LABELS</p>
            <p style="color: black; font-size:11px;">Regd.Office: B-56, Sector- 88, Noida, Uttar Pradesh - 201305, INDIA</p>
             <p style="color: black; font-size:11px;">Factory: B-56, Sector- 88, Noida, Uttar Pradesh - 201305, INDIA</p>
            <p style="color: black; font-size:11px;">Phone : 9899040250</p>
            <p style="color: black; font-size:11px;">E-Mail: mail@uniquelabels.in</p>
            <p style="color: black; font-size: 11px;">Website : www.uniquelabels.in</p>
         </div>
         </div>
         <div style="">
            {% if doc.irn %}
            {% set e_invoice_log = frappe.db.get_value( "e-Invoice Log", doc.irn, ("invoice_data", "signed_qr_code"), as_dict=True ) %}
            {% if e_invoice_log %}
            {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}
            {% set date_format = frappe.db.get_single_value("System Settings",'date_format').replace("mm","MM") %}
            <div style="">
               
               <div  style="width: 100px;  ">
                  {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}
               </div>
               <p style="padding-left:35px;margin-bottom:-5px;">E-Invoice</p>
            </div>
            {% endif %}
            {% endif %}
         </div>
      </div>
      <div class="first">
         <p>&nbsp;GSTIN : &nbsp;<b>09ACLPJ4866E1ZB</b></p>
         <p>PAN : <b>ACLPJ4866E</b></p>
         <p>MSME No : <b>UDYAM-UP-28-0010734</b></p>
         <p>TAN : <b>DELS63773D</b>&nbsp;&nbsp;</p>
      </div>
      
      
      
      <div class="Main-class-rajesh">
         <div>
            <p>Credit Note No.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> :</b>  
               {% if doc.name %}
               <b>{{doc.name}}</b>
               {% endif %}
            </p>
            <p>Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> :</b>
               
               
               <b>{{doc.get_formatted("posting_date")}}</b>
               
            </p>
            <p>State Name :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b> :</b>
               {% if doc.custom_sales_order %}
               <b>{{doc.custom_sales_order}}</b>
               {% endif %}
            </p>
         </div>
         <div  class="Rajesh">
          <p style="border-bottom: 2px solid black;  width:350px; text-align:center;">Against Invoice/Bill of Supply</p>
          <p>Bill No./DT : {{doc.return_against}} DT.{{ doc.get_formatted("custom_invoice_date") }}</p>
         </div>
      </div>
      <div class="Bill-Address">
         <div>
            <p style="text-align: center;">Buyer (Bill to)</p>
            <p style="font-weight:bold;font-size:12px;">{{doc.customer}}</p>
            <p style=margin-bottom:0!important;">{{doc.get_formatted("address_display", doc) }}</p>
            {% if doc.company_gstin %}
            <p style=margin-top:0!important;>GSTIN :{{doc.custom_customer_gstin}}</p>
            {% endif %}
         </div>
         <div style="padding-left:140px;">
            <p>Consignee (Ship to)</p>
            <p style="font-weight:bold; font-size:12px;">{{doc.customer}}</p>
            <p>{{doc.get_formatted("billing_address_display", doc) }}</p>
            {% if doc.company_gstin %}
            <p style=margin-top:0!important;>GSTIN :{{doc.custom_customer_gstin}}</p>
            {% endif %}
         </div>
      </div>
<!--      <table class="table-fixed1">-->
<!--         <thead>-->
<!--            <tr>-->
<!--               <td style="width: 3%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Sr.No.</b></td>-->
<!--               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Item Code</b></td>-->
<!--               <td style="width: 60%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Description of Goods</b></td>-->
<!--               <td style="width: 3%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>HSN Code</b></td>-->
<!--               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Quantity</b></td>-->
<!--               <td style="width: 7%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Rate<br>₹</b></td>-->
<!--               <td style="width: 7%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>per</b></td>-->
<!--               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Amount<br>₹</b></td>-->
<!--            </tr>-->
<!--         </thead>-->
<!--         <tbody class="body">-->
<!--            <tr>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align: justify;">{{ loop.index }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align: justify;">{{ row.get_formatted("custom_item_classication_code", row) }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ frappe.db.get_value("Item", row.item_code, "custom_display_name") or '' }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--               <td style="font-size:10px; padding-left:-50px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style=" -webkit-box-pack: justify; text-align:center; margin-bottom: 10px;">{{ row.get_formatted("gst_hsn_code", row) }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style=" text-align:right; margin-bottom: 10px; -webkit-box-pack: justify;">-->
<!--                     {{ row.qty | abs }}  {{ row.uom }}-->
<!--                  </div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
               <!--<td style="font-size:10px;">-->
               <!--    {% for row in doc.items %}-->
               <!--    <div style="margin-bottom:  10px; -webkit-box-pack: justify; text-align:right;">{{ row.qty }}</div>-->
               <!--    {% endfor %}-->
               <!--</td>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ "%.2f"|format(row.rate) }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ row.uom }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--               <td style="font-size:10px;">-->
<!--                  {% for row in doc.items %}-->
<!--                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align:right;">{{ "{:,.2f}".format(row.amount | abs) }}</div>-->
<!--                  {% endfor %}-->
<!--               </td>-->
<!--            </tr>-->
<!--         </tbody>-->
<!--         <tr style="height: 0px;">-->
<!--            <td colspan="4" style="text-align:right; font-size:12px;"><b>Total :</b></td>-->
<!--            <td style="font-size: 10px; text-align:right;">    <b>{{ "{:,.0f}".format(doc.total_qty | abs) }}</b></td>-->
<!--            <td></td>-->
<!--            <td></td>-->
<!--            <td style="font-size: 10px;text-align:right;"><b>{{ "{:,.2f}".format(doc.total | abs) }}</b></td>-->
<!--         </tr>-->
         
<!--                  <tr>-->
<!--            <td colspan="4" rowspan="6" style="font-size:10px; margin:0; border-right: 2px solid black !important;  padding-bottom:10px; width:50%;">-->
                
<!--                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px; padding-right:5px;">Bill Details</p>-->
               
<!--                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Bill Type &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Number &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Date &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount Adjusted</p>-->
<!--                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Private&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.return_against}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.get_formatted("custom_invoice_date")}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.rounded_total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>-->
<!--                <p style="border:1px solid black; margin:0; padding:5px;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;-->
<!--                &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;-->
<!--                &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
<!--                Total:&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.rounded_total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>-->
<!--            <p style="font-size:9px;">-->
<!--E-Invoice Date & Time : {{ doc.get_formatted("posting_date", doc) }} -->
<!--{% set time_str = doc.posting_time|string %}-->
<!--{% set time = time_str[:8] %}-->
<!--{% set hours = time[:2]|int %}-->
<!--{% set am_pm = "AM" if hours < 12 else "PM" %}-->
<!--{% set formatted_hours = hours if 1 <= hours <= 12 else (hours - 12 if hours > 12 else 12) %}-->
<!--{{ "{:02d}:{} {}".format(formatted_hours, time[3:], am_pm) }}-->
<!--</p>-->

<!--              <p style="font-size:9px;">IRN : -->
<!--              {%if doc.irn%}-->
<!--              {{doc.irn}}-->
<!--              {%endif%}-->
<!--              </p>-->
<!--              <p style="font-size:9px;">GST Amount in Words : {{doc.in_words}}</p>-->
<!--            </td>-->
        
<!--         </tr>-->
<!--         <tr>-->
<!--             <tr>-->
<!--                 <td colspan="5" style="font-size:10px; width:10%;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;Total Amount :  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;-->
<!--                  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{:,.2f}".format(doc.total | abs) }}</td>-->
                
<!--             </tr>-->
            <!--<td ></td>-->
<!--            <td colspan="5"  style="font-size:10px; margin-top:20px; margin-left:0;">-->
<!--               <p>-->
<!--                  Total CGST Amount &nbsp;&nbsp;&nbsp;&nbsp;-->
<!--                  <b>-->
<!--                  {% for tax in doc.taxes %}-->
<!--                  {% if "CGST" in tax.account_head %}-->
<!--                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>-->
<!--                  {% endif %}-->
<!--                  {% endfor %}-->
<!--                  </b>-->
<!--               </p>-->
<!--               <p>Total SGST Amount  &nbsp;&nbsp;&nbsp;-->
<!--                  <b>{% for tax in doc.taxes %}-->
<!--                  {% if "SGST" in tax.account_head %}-->
<!--                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>-->
<!--                  {% endif %}-->
<!--                  {% endfor %}</b>-->
<!--               </p>-->
<!--               <p>Total IGST Amount -->
<!--                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
<!--                  <b> {% for tax in doc.taxes %}-->
<!--                  {% if "IGST" in tax.account_head %}-->
<!--                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>-->
<!--                  {% endif %}-->
<!--                  {% endfor %}</b>-->
<!--               </p>-->
<!--            </td>-->
<!--         </tr>-->
<!--          <tr>-->
            <!--<td colspan="4" style="border-top: 2px solid white !important;"></td>-->
<!--            <td colspan="5" style="font-size:10px;"><b>Total GST Amount</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
<!--               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
<!--               <b>{{"{:,.2f}".format(doc.total_taxes_and_charges | abs)}}</b>-->
<!--            </td>-->
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
<!--         </tr>-->
<!--         <tr>-->
            <!--<td colspan="4"></td>-->
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
<!--         </tr>-->
        
          
<!--         <tr>-->
<!--            <td colspan="4" style="font-size:10px; margin:0; padding:0;">-->
<!--               <p>Total Amount (in Words) Rs.  &nbsp;&nbsp;&nbsp;{{doc.in_words}}-->
<!--               </p>-->
<!--            </td>-->
<!--            <td colspan="4" style="font-size:10px; margin:0; padding:0;"><b>&nbsp;&nbsp;&nbsp;&nbsp;Amount After Tax:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
<!--               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
<!--               <b> {{"{:,.2f}".format(doc.grand_total | abs)}}</b>-->
<!--            </td>-->
<!--         </tr>-->
         
<!--      </table>-->

 <table class="table-fixed1">
          <thead>
        <td style="width: 3%; font-size: 9px; border-bottom: 2px solid black; text-align:center;"><b>Sr.No.</b></td>
        <td style="width: 12%; font-size: 9px; border-bottom: 2px solid black; text-align:center; "><b>Item Code</b></td>
        <td style="width: 48%; font-size: 9px; border-bottom: 2px solid black; text-align:center; "><b>Description of Goods</b></td>
        <td style="width: 3%; font-size: 9px; border-bottom: 2px solid black; text-align:center;"><b>HSN Code</b></td>
        <td style="width: 9%; font-size: 9px; border-bottom: 2px solid black; text-align:center;"><b>Quantity</b></td>
        <td style="width: 8%; font-size: 9px; border-bottom: 2px solid black; text-align:center; "><b>Rate ₹</b></td>
        <td style="width: 7%; font-size: 9px; border-bottom: 1px solid black; text-align:center; "><b>per</td>
        <td style="width: 17%; font-size: 9px; border-bottom: 1px solid black; text-align:center; "><b>Amount ₹</b></td>
    </tr>
   <tr>
   
   <!-- <tr style="border: none !important; ">-->

   <!--{% for row in doc.items %}-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else loop.index }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else row.get_formatted("custom_item_classication_code", row) }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px !important; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px; text-align: justify;">{{ row.get_formatted("item_name", row) }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ row.get_formatted("gst_hsn_code", row) }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else row.qty }} {{ "" if "Freight" in row.description else row.uom }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ "%.2f"|format(row.rate) if "Freight" not in row.description else "" }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else row.uom }}</div>-->
   <!--     </td>-->
   <!--     <td style="font-size:12px; padding: 2px; text-align:center; border-bottom: none !important;">-->
   <!--         <div style="margin-bottom: 5px;">{{ "{:,.2f}".format(row.amount) }}</div>-->
   <!--     </td>-->
        
       
   <!-- </tr>-->
   <!--   {% endfor %}-->
   
    
</tr>
</thead>
<tbody class="body">
   <tr>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else loop.index }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description or not row.get_formatted("custom_item_classication_code", row) else row.get_formatted("custom_item_classication_code", row) }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px; text-align: justify;">{{ frappe.db.get_value("Item", row.item_code, "custom_display_name") or '' }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ row.get_formatted("gst_hsn_code", row) }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else row.qty|int }} {{ "" if "Freight" in row.description else row.uom }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ "%.2f"|format(row.rate) if row.rate % 1 != 0 else row.rate|int }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ "" if "Freight" in row.description else row.uom }}</div>
        {% endfor %}
    </td>
    <td style="font-size:10px; padding: 2px !important; text-align:center; border-bottom: none !important;">
        {% for row in doc.items %}
        <div style="margin-bottom: 5px;">{{ "{:,.2f}".format(row.amount) if row.amount % 1 != 0 else row.amount|int }}</div>
        {% endfor %}
    </td>
</tr>
</tbody>

         <tr style="height: 0px;     border-top: 2px solid black;">
            <td colspan="4" style="text-align:right; font-size:12px;"><b>Total :</b></td>
            <td style="font-size: 10px; text-align:center;">    <b>{{ "{:,.0f}".format(doc.total_qty) }}</b></td>
            <td></td>
            <td></td>
            <td style="font-size: 10px;text-align:center;"><b>{{ "{:,.2f}".format(doc.total) }}</b></td>
         </tr>
         <!--<tr>-->
         <!--   <td colspan="8" style="text-align:right; font-size:10px;"><b>Freight Charge</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-->
         <!--      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           -->
         <!--      {% for tax in doc.taxes %}-->
         <!--      {% if "Freight and Forwarding Charges - UL" in tax.account_head %}-->
         <!--      {{ "{:,.2f}".format(tax.tax_amount) }}-->
         <!--      {% endif %}-->
         <!--      {% endfor %}-->
         <!--   </td>-->
         <!--</tr>-->
         
         <tr>
             <td colspan="8" style="font-size:12px;" >&nbsp;<b>Remarks:</b></td>
         </tr>
         <tr>
           
               <td colspan="4" rowspan="6" style="font-size:10px; margin:0; border-right: 2px solid black !important;  padding-bottom:10px; width:50%;">
                
                  <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px; padding-right:5px;">Bill Details</p>
                 
                  <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Bill Type &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Number &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Date &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount Adjusted</p>
                  <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Private&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.return_against}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.get_formatted("custom_invoice_date")}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.rounded_total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>
                  <p style="border:1px solid black; margin:0; padding:5px;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                  &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  Total:&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.rounded_total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>
              <p style="font-size:9px;">
  E-Invoice Date & Time : {{ doc.get_formatted("posting_date", doc) }} 
  {% set time_str = doc.posting_time|string %}
  {% set time = time_str[:8] %}
  {% set hours = time[:2]|int %}
  {% set am_pm = "AM" if hours < 12 else "PM" %}
  {% set formatted_hours = hours if 1 <= hours <= 12 else (hours - 12 if hours > 12 else 12) %}
  {{ "{:02d}:{} {}".format(formatted_hours, time[3:], am_pm) }}
  </p>
  
                <p style="font-size:9px;">IRN : 
                {%if doc.irn%}
                {{doc.irn}}
                {%endif%}
                </p>
                <p style="font-size:9px;">GST Amount in Words : {{doc.in_words}}</p>
         
          

            </td>
            
            
            
            <td colspan="5" style="font-size:10px; padding: 0 3px 0 3px !important; margin: 0;">
  <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
    <span>Taxable Amount:</span>
    <b>{{ "{:,.2f}".format(doc.custom_taxable_value) }}</b>
  </div>
</td>

         </tr>
         <tr>
            <!--<td ></td>-->
            <td colspan="5" rowspan="3" style="font-size:10px; margin-top:20px; margin-left:0;">
               <p>
                  Total CGST Amount &nbsp;
                  <b>
                  {% for tax in doc.taxes %}
                  {% if "CGST" in tax.account_head %}
                  @&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount) }}</b>
                  {% endif %}
                  {% endfor %}
                  </b>
               </p>
               <p>Total SGST Amount  &nbsp;
                  <b>{% for tax in doc.taxes %}
                  {% if "SGST" in tax.account_head %}
                  @&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount) }}</b>
                  {% endif %}
                  {% endfor %}</b>
               </p>
               <p>Total IGST Amount 
                  &nbsp;
                  <b> {% for tax in doc.taxes %}
                  {% if "IGST" in tax.account_head %}
                  @&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount) }}</b>
                  {% endif %}
                  {% endfor %}</b>
               </p>
            </td>
         </tr>
         <tr>
            <!--<td colspan="4"></td>-->
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
         <tr>
            <!--<td colspan="4"></td>-->
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
         <tr>
            <!--<td></td>-->
            <td colspan="5" style="font-size:10px; padding: 0; margin: 0;">
  <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
    <span><b>&nbsp;Total GST Amount</b></span>
    <span><b>{{ "{:,.2f}".format(doc.total_taxes_and_charges) }}</b>&nbsp;</span>
  </div>
</td>

            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
         <tr>
            <td colspan="4" style="font-size:9px;">
               <p>
                  <b>&nbsp;IRN :&nbsp;&nbsp;</b> 
                  {{ doc.irn or ''}}&nbsp;&nbsp;&nbsp;&nbsp;
                  {{ frappe.utils.get_datetime(frappe.db.get_value("e-Invoice Log", doc.irn, "acknowledged_on")).strftime("%d-%m-%Y %I:%M %p") if frappe.db.get_value("e-Invoice Log", doc.irn, "acknowledged_on") else "" }}
                  <!--{{ doc.get_formatted("posting_date") }}-->
                  <!--{{doc.posting_date}}-->
                  <!--{% if doc.posting_time %}-->
                  <!--{% set posting_time = doc.posting_time|string %}-->
                  <!--{% set time_parts = posting_time.split(':') %}-->
                  <!--{% set hour = time_parts[0]|int %}-->
                  <!--{% set minute = time_parts[1] %}-->
                  <!--{% set second = time_parts[2][:2] %}-->
                  <!--{% set period = "AM" if hour < 12 else "PM" %}-->
                  <!--{% set hour = hour if hour <= 12 else hour - 12 %}-->
                  <!--{% set hour = 12 if hour == 0 else hour %}-->
                  <!--{{"{:02d}:{}:{} {}".format(hour, minute, second, period) }}-->
                  <!--{% endif %}-->
               </p>
            </td>
            
           <td colspan="4" style="padding: 0; margin: 0;">
  <div style="display: flex; justify-content: space-between; font-size: 10px; width: 100%;    padding: 0 3px 0 3px;">
    <b>Round off ₹</b>
    <b>{{"{:,.2f}".format(doc.rounding_adjustment)}}</b>
  </div>
</td>

         </tr>
         <tr>
            <td colspan="4" style="font-size:10px; margin:0; padding:0;">
               <p>&nbsp;<b>E-Way Bill No :</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {{doc.ewaybill or ""}}
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>E-Way Bill Date :</b>&nbsp;&nbsp;&nbsp;&nbsp; {{ frappe.utils.get_datetime(frappe.db.get_value("e-Waybill Log", doc.ewaybill, "created_on")).strftime("%d-%m-%Y %I:%M %p") if frappe.db.get_value("e-Waybill Log", doc.ewaybill, "created_on") else "" }}

                  
               </p>
            </td>
           <td colspan="4" style="font-size:10px;     padding: 0 3px 0 3px !important; margin: 0;">
  <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
    <b>Total Bill Amount ₹</b>
    <b>{{ "{:,.2f}".format(doc.outstanding_amount) }}</b>
  </div>
</td>

         </tr>
         <tr>
            <td colspan="8" style="font-size:10px;"> &nbsp;<b>Total Amount (in Words)</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Rs. {{doc.in_words}}</td>
         </tr>
      </table>
      
      
      <table style="width:100%;">
    <tr>
        <td rowspan="2" colspan="4" style="font-size:10px; text-align:center;">HSN/SAC Code</td>
        <td rowspan="2" style="font-size:10px; text-align:center; width:15%;">Taxable Value</td>
        <td style="font-size:10px; text-align:center;" colspan="2">CGST</td>
        <td style="font-size:10px; text-align:center;" colspan="2">SGST</td>
        <td style="font-size:10px; text-align:center;" colspan="2">IGST</td>
    </tr>
    <tr>
        <td style="font-size:10px; text-align:center;">Rate</td>
        <td style="font-size:10px; text-align:center;">Amount</td>
        <td style="font-size:10px; text-align:center;">Rate</td>
        <td style="font-size:10px; text-align:center;">Amount</td>
        <td style="font-size:10px; text-align:center;">Rate</td>
        <td style="font-size:10px; text-align:center;">Amount</td>
    </tr>
    
    {% set total_taxable = 0 %}
{% set total_cgst = 0 %}
{% set total_sgst = 0 %}
{% set total_igst = 0 %}

{% for row in doc.custom_gst_table %}
    {% set total_taxable = total_taxable + row.taxable_amount|float %}
    {% set total_cgst = total_cgst + row.cgst_amount|float %}
    {% set total_sgst = total_sgst + row.sgst_amount|float %}
    {% set total_igst = total_igst + row.igst_amount|float %}
    <tr>
        <td colspan="4" style="font-size:10px; text-align:center;">{{ row.hsn_sac }}</td>
        <td style="font-size:10px; text-align:center;">{{ "{:,.2f}".format(row.taxable_amount|float) if row.taxable_amount else "" }}</td>
        <td style="font-size:10px; text-align:center;">{{ (row.cgst_rate|string) ~ "%" if row.cgst_rate|float > 0 else "" }}</td>
        <td style="font-size:10px; text-align:center;">{{ frappe.utils.fmt_money(row.cgst_amount, currency="") if row.cgst_amount|float > 0 else ""}}</td>
        <td style="font-size:10px; text-align:center;">{{ (row.sgst_rate|string) ~ "%" if row.sgst_rate|float > 0 else "" }}</td>
        <td style="font-size:10px; text-align:center;">{{ frappe.utils.fmt_money(row.sgst_amount, currency="") if row.sgst_amount|float > 0 else "" }}</td>
        <td style="font-size:10px; text-align:center;">{{ (row.igst_rate|string) ~ "%" if row.igst_rate|float > 0 else "" }}</td> 
        <td style="font-size:10px; text-align:center;">{{ frappe.utils.fmt_money(row.igst_amount, currency="") if row.igst_amount|float > 0 else "" }} </td>
    </tr> 
{% endfor %}

<!-- Total Row -->
<tr>
    <td colspan="4" style="font-size:10px; text-align:center;"><b>Total</b></td>
    <td style="font-size:10px; text-align:center;">
        <b>{{ frappe.utils.fmt_money(doc.custom_gst_total_taxable_, currency="") if doc.custom_gst_total_taxable_|float > 0 else "" }}</b>
    </td> 
    <td></td>
    <td style="font-size:10px; text-align:center;">
        <b>{{ frappe.utils.fmt_money(doc.custom_cgst_total, currency="") if doc.custom_cgst_total|float > 0 else "" }}</b>
    </td> 
    <td></td>
    <td style="font-size:10px; text-align:center;">
        <b>{{ frappe.utils.fmt_money(doc.custom_sgst_total, currency="") if doc.custom_sgst_total|float > 0 else "" }}</b>
    </td> 
    <td></td>
    <td style="font-size:10px; text-align:center;">
        <b>{{ frappe.utils.fmt_money(doc.custom_igst_total, currency="") if doc.custom_igst_total|float > 0 else "" }}</b>
    </td>
</tr>

</table>
     
      <div class="Discription" >
         <div>
            <h6 style="font-size:10px;"><u>TERMS & CONDITIONS :</u></h6>
            <p>Declaration :</p>
            <p>(a) Please send all your remittances in favour of "M/s Unique Labels" to our above
               mentioned address only
            </p>
            <p>(b) Any descrepancy in the invoice must be intimated within 7 working days alongwith the
               copy of the same.
            </p>
            <p>(c) This invoice shows the actual price of the goods described and that all particulars are
               true and correct.
            </p>
            <p>(d) Subject to Uttar Pradesh Jurisdiction.</p>
            <p style="padding-top: 10px;"><b>Generated By :</b> 
               {% if doc.custom_creator_by %}
               {{ doc.custom_creator_by }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               {% endif %}
               <b>Generated On:</b> {{ doc.get_formatted("creation") }}
            </p>
         </div>
         
         <div style="padding-top:110px;">
            <p>Customer Signature</p>
         </div>
         <div style="padding-right:10px;">
            <p>For UNIQUE LABELS</p>
            <img style="width:91px;" src="/files/UNique Labels.png" alt=" " />
            <p>Authorised Signatory</p>
         </div>
      </div>
      
      
      
      <!--<h5 style="text-align: center; margin:0; padding:0; font-size:9px;">This is computer-generated document and no signature is required</h5>-->
   </div>
     <div class="container page-break">
         <div class="invoice-type">(duplicate)</div>
    <center class="center-tag">
         <h3 style="margin:0; padding:0;">CREDIT NOTE</h3>
         <h6 style="margin-bottom:0; font-size:9px;">(UNDER SEC. 31 OF CGST ACT 2017, RULE 46 OF CGST RULE 2017 STATE GST ACT & RULE)</h6>
      </center>
      <!--<div>-->
      <!--<h6 style="margin-bottom:0; font-size:9px; text-align:right;">{{doc.invoice_copy}}</h6></div>-->
     <div class="Main" style="display:flex; justify-content:space-between;">
          <div style="display:flex; flex-direction:row;">
         <div>
            <img src="/files/Logo_Unique Lables5c63ed.jpg" alt="Unique Labels Logo" style="width: 95px; height: 119px; margin:-3px 5px 0px 2px;" />
         </div>
         <div>
            <p style="font-weight: bold; color: black; font-size: 18px;">UNIQUE LABELS</p>
            <p style="color: black; font-size:11px;">Regd.Office: B-56, Sector- 88, Noida, Uttar Pradesh - 201305, INDIA</p>
             <p style="color: black; font-size:11px;">Factory: B-56, Sector- 88, Noida, Uttar Pradesh - 201305, INDIA</p>
            <p style="color: black; font-size:11px;">Phone : 9899040250</p>
            <p style="color: black; font-size:11px;">E-Mail: mail@uniquelabels.in</p>
            <p style="color: black; font-size: 11px;">Website : www.uniquelabels.in</p>
         </div>
         </div>
         <div style="">
            {% if doc.irn %}
            {% set e_invoice_log = frappe.db.get_value( "e-Invoice Log", doc.irn, ("invoice_data", "signed_qr_code"), as_dict=True ) %}
            {% if e_invoice_log %}
            {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}
            {% set date_format = frappe.db.get_single_value("System Settings",'date_format').replace("mm","MM") %}
            <div style="">
               
               <div  style="width: 100px;  ">
                  {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}
               </div>
               <p style="padding-left:35px;margin-bottom:-5px;">E-Invoice</p>
            </div>
            {% endif %}
            {% endif %}
         </div>
      </div>
      <div class="first">
         <p>&nbsp;GSTIN : &nbsp;<b>09ACLPJ4866E1ZB</b></p>
         <p>PAN : <b>ACLPJ4866E</b></p>
         <p>MSME No : <b>UDYAM-UP-28-0010734</b></p>
         <p>TAN : <b>DELS63773D</b>&nbsp;&nbsp;</p>
      </div>
      <div class="Main-class-rajesh">
         <div>
            <p>Credit Note No.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> :</b>  
               {% if doc.name %}
               <b>{{doc.name}}</b>
               {% endif %}
            </p>
            <p>Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> :</b>
               {% if doc.posting_date %}
               <b>{{doc.posting_date}}</b>
               {% endif %}
            </p>
            <p>State Name :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b> :</b>
               {% if doc.custom_sales_order %}
               <b>{{doc.custom_sales_order}}</b>
               {% endif %}
            </p>
         </div>
         <div  class="Rajesh">
          <p style="border-bottom: 2px solid black; margin-right:-90px; width:350px; text-align:center;">Against Invoice/Bill of Supply</p>
          <p>Bill No./DT : {{doc.return_against}}DT.12/09/2024</p>
         </div>
      </div>
      <div class="Bill-Address">
         <div>
            <p>Buyer (Bill to)</p>
            <p style="font-weight:bold;font-size:12px;">{{doc.customer}}</p>
            <p style=margin-bottom:0!important;">{{doc.get_formatted("address_display", doc) }}</p>
            {% if doc.company_gstin %}
            <p style=margin-top:0!important;>GSTIN :{{doc.company_gstin}}</p>
            {% endif %}
         </div>
         <div style="padding-left:140px;">
            <p>Details Of Consignee| Shipped To :</p>
            <p style="font-weight:bold; font-size:12px;">{{doc.customer}}</p>
            <p>{{doc.get_formatted("billing_address_display", doc) }}</p>
            {% if doc.company_gstin %}
            <p style=margin-top:0!important;>GSTIN :{{doc.company_gstin}}</p>
            {% endif %}
         </div>
      </div>
      <table class="table-fixed1">
         <thead>
            <tr>
               <td style="width: 3%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Sr.No.</b></td>
               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Item Code</b></td>
               <td style="width: 60%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Description of Goods</b></td>
               <td style="width: 3%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>HSN Code</b></td>
               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Quantity</b></td>
               <td style="width: 7%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Rate<br>₹</b></td>
               <td style="width: 7%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>per</b></td>
               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Amount<br>₹</b></td>
            </tr>
         </thead>
         <tbody class="body">
            <tr>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align: justify;">{{ loop.index }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align: justify;">{{ row.get_formatted("custom_item_classication_code", row) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ row.get_formatted("description", row) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px; padding-left:-50px;">
                  {% for row in doc.items %}
                  <div style=" -webkit-box-pack: justify; text-align:center; margin-bottom: 10px;">{{ row.get_formatted("gst_hsn_code", row) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style=" text-align:right; margin-bottom: 10px; -webkit-box-pack: justify;">
                     {{ row.qty | abs }}  {{ row.uom }}
                  </div>
                  {% endfor %}
               </td>
               <!--<td style="font-size:10px;">-->
               <!--    {% for row in doc.items %}-->
               <!--    <div style="margin-bottom:  10px; -webkit-box-pack: justify; text-align:right;">{{ row.qty }}</div>-->
               <!--    {% endfor %}-->
               <!--</td>-->
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ "%.2f"|format(row.rate) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ row.uom }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align:right;">{{ "{:,.2f}".format(row.amount | abs) }}</div>
                  {% endfor %}
               </td>
            </tr>
         </tbody>
         <tr style="height: 0px;">
            <td colspan="4" style="text-align:right; font-size:12px;"><b>Total :</b></td>
            <td style="font-size: 10px; text-align:right;">    <b>{{ "{:,.0f}".format(doc.total_qty | abs) }}</b></td>
            <td></td>
            <td></td>
            <td style="font-size: 10px;text-align:right;"><b>{{ "{:,.2f}".format(doc.total | abs) }}</b></td>
         </tr>
         
                  <tr>
             <td colspan="4" rowspan="6" style="font-size:10px; margin:0; border-right: 2px solid black !important;  padding-bottom:10px; width:50%;">
                <!--edited here-->
                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px; padding-right:5px;">Bill Details</p>
               
                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Bill Type &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Number &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Date &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount Adjusted</p>
                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Private&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.return_against}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.custom_invoice_date}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>
                <p style="border:1px solid black; margin:0; padding:5px;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                Total:&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>
              <p style="font-size:9px;">
E-Invoice Date & Time : {{ doc.get_formatted("posting_date", doc) }} 
{% set time_str = doc.posting_time|string %}
{% set time = time_str[:8] %}
{% set hours = time[:2]|int %}
{% set am_pm = "AM" if hours < 12 else "PM" %}
{% set formatted_hours = hours if 1 <= hours <= 12 else (hours - 12 if hours > 12 else 12) %}
{{ "{:02d}:{} {}".format(formatted_hours, time[3:], am_pm) }}
</p>

              <p style="font-size:9px;">IRN : 
              {%if doc.irn%}
              {{doc.irn}}
              {%endif%}
              </p>
              <p style="font-size:9px;">GST Amount in Words : {{doc.in_words}}</p>
         </tr>
         <tr>
             <tr>
                 <td colspan="5" style="font-size:10px; width:10%;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;Total Amount :  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{:,.2f}".format(doc.total | abs) }}</td>
                
             </tr>
            <!--<td ></td>-->
            <td colspan="5"  style="font-size:10px; margin-top:20px; margin-left:0;">
               <p>
                  Total CGST Amount &nbsp;&nbsp;&nbsp;&nbsp;
                  <b>
                  {% for tax in doc.taxes %}
                  {% if "CGST" in tax.account_head %}
                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>
                  {% endif %}
                  {% endfor %}
                  </b>
               </p>
               <p>Total SGST Amount  &nbsp;&nbsp;&nbsp;
                  <b>{% for tax in doc.taxes %}
                  {% if "SGST" in tax.account_head %}
                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>
                  {% endif %}
                  {% endfor %}</b>
               </p>
               <p>Total IGST Amount 
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <b> {% for tax in doc.taxes %}
                  {% if "IGST" in tax.account_head %}
                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>
                  {% endif %}
                  {% endfor %}</b>
               </p>
            </td>
         </tr>
          <tr>
            <!--<td colspan="4" style="border-top: 2px solid white !important;"></td>-->
            <td colspan="4" style="font-size:10px;"><b>Total GST Amount</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               <b>{{"{:,.2f}".format(doc.total_taxes_and_charges)}}</b>
            </td>
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
         <tr>
            <!--<td colspan="4"></td>-->
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
        
          
         <tr>
            <td colspan="4" style="font-size:10px; margin:0; padding:0;">
               <p>Total Amount (in Words) Rs.  &nbsp;&nbsp;&nbsp;{{doc.in_words}}
               </p>
            </td>
            <td colspan="4" style="font-size:10px; margin:0; padding:0;"><b>&nbsp;&nbsp;&nbsp;&nbsp;Amount After Tax:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               <b> {{"{:,.2f}".format(doc.grand_total)}}</b>
            </td>
         </tr>
         
      </table>
     
      <div class="Discription">
         <div>
            <h6 style="font-size:10px;">Reason For Issuing Document:&nbsp;&nbsp; 04-Correction in Invoice</h6>
           <p>Narration: &nbsp;&nbsp; BEING CREDIT NOTE NO. CN/S/0017/24-25 A/G INVOICENO UL/0506/24-25 DT 12/09/2024</p>
            <div style="padding-top:55px; padding-left:-100px;">
             <p><b>Generated By :</b> 
               {% if doc.custom_creator_by %}
               {{ doc.custom_creator_by }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               {% endif %}
               <b>Generated On:</b> {{ doc.get_formatted("creation") }}
            </p>
         </div>
         </div>
        
         <div style="padding-right:10px;">
            <p>For UNIQUE LABELS</p>
            <img style="width:86px;" src="/files/UNique Labels.png" alt=" " />
            <p>Authorised Signatory</p>
         </div>
      </div>
      <h5 style="text-align: center; margin:0; padding:0; font-size:9px;">This is computer-generated document and no signature is required</h5>
   </div>
     <div class="container page-break">
         <div class="invoice-type">(triplicate)</div>
     <center class="center-tag">
         <h3 style="margin:0; padding:0;">CREDIT NOTE</h3>
         <h6 style="margin-bottom:0; font-size:9px;">(UNDER SEC. 31 OF CGST ACT 2017, RULE 46 OF CGST RULE 2017 STATE GST ACT & RULE)</h6>
      </center>
      <!--<div>-->
      <!--<h6 style="margin-bottom:0; font-size:9px; text-align:right;">{{doc.invoice_copy}}</h6></div>-->
     <div class="Main" style="display:flex; justify-content:space-between;">
          <div style="display:flex; flex-direction:row;">
         <div>
            <img src="/files/Logo_Unique Lables5c63ed.jpg" alt="Unique Labels Logo" style="width: 95px; height: 119px; margin:-3px 5px 0px 2px;" />
         </div>
         <div>
            <p style="font-weight: bold; color: black; font-size: 18px;">UNIQUE LABELS</p>
            <p style="color: black; font-size:11px;">Regd.Office: B-56, Sector- 88, Noida, Uttar Pradesh - 201305, INDIA</p>
             <p style="color: black; font-size:11px;">Factory: B-56, Sector- 88, Noida, Uttar Pradesh - 201305, INDIA</p>
            <p style="color: black; font-size:11px;">Phone : 9899040250</p>
            <p style="color: black; font-size:11px;">E-Mail: mail@uniquelabels.in</p>
            <p style="color: black; font-size: 11px;">Website : www.uniquelabels.in</p>
         </div>
         </div>
         <div style="">
            {% if doc.irn %}
            {% set e_invoice_log = frappe.db.get_value( "e-Invoice Log", doc.irn, ("invoice_data", "signed_qr_code"), as_dict=True ) %}
            {% if e_invoice_log %}
            {% set invoice_data = json.loads(e_invoice_log.invoice_data) %}
            {% set date_format = frappe.db.get_single_value("System Settings",'date_format').replace("mm","MM") %}
            <div style="">
               
               <div  style="width: 100px;  ">
                  {{ web_block('e-Invoice QR', values={'e_invoice_qr_text': e_invoice_log.signed_qr_code }) }}
               </div>
               <p style="padding-left:35px;margin-bottom:-5px;">E-Invoice</p>
            </div>
            {% endif %}
            {% endif %}
         </div>
      </div>
      <div class="first">
         <p>&nbsp;GSTIN : &nbsp;<b>09ACLPJ4866E1ZB</b></p>
         <p>PAN : <b>ACLPJ4866E</b></p>
         <p>MSME No : <b>UDYAM-UP-28-0010734</b></p>
         <p>TAN : <b>DELS63773D</b>&nbsp;&nbsp;</p>
      </div>
      <div class="Main-class-rajesh">
         <div>
            <p>Credit Note No.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> :</b>  
               {% if doc.name %}
               <b>{{doc.name}}</b>
               {% endif %}
            </p>
            <p>Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b> :</b>
               {% if doc.posting_date %}
               <b>{{doc.posting_date}}</b>
               {% endif %}
            </p>
            <p>State Name :&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b> :</b>
               {% if doc.custom_sales_order %}
               <b>{{doc.custom_sales_order}}</b>
               {% endif %}
            </p>
         </div>
         <div  class="Rajesh">
          <p style="border-bottom: 2px solid black; margin-right:-90px; width:350px; text-align:center;">Against Invoice/Bill of Supply</p>
          <p>Bill No./DT : {{doc.return_against}}DT.12/09/2024</p>
         </div>
      </div>
      <div class="Bill-Address">
         <div>
            <p>Details Of Receiver| Billed To :</p>
            <p style="font-weight:bold;font-size:12px;">{{doc.customer}}</p>
            <p style=margin-bottom:0!important;">{{doc.get_formatted("address_display", doc) }}</p>
            {% if doc.company_gstin %}
            <p style=margin-top:0!important;>GSTIN :{{doc.company_gstin}}</p>
            {% endif %}
         </div>
         <div style="padding-left:140px;">
            <p>Details Of Consignee| Shipped To :</p>
            <p style="font-weight:bold; font-size:12px;">{{doc.customer}}</p>
            <p>{{doc.get_formatted("billing_address_display", doc) }}</p>
            {% if doc.company_gstin %}
            <p style=margin-top:0!important;>GSTIN :{{doc.company_gstin}}</p>
            {% endif %}
         </div>
      </div>
      <table class="table-fixed1">
         <thead>
            <tr>
               <td style="width: 3%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Sr.No.</b></td>
               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Item Code</b></td>
               <td style="width: 60%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Description of Goods</b></td>
               <td style="width: 3%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>HSN Code</b></td>
               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Quantity</b></td>
               <td style="width: 7%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Rate<br>₹</b></td>
               <td style="width: 7%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>per</b></td>
               <td style="width: 10%; font-size: 10px; border-bottom: 2px solid black; text-align:center;"><b>Amount<br>₹</b></td>
            </tr>
         </thead>
         <tbody class="body">
            <tr>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align: justify;">{{ loop.index }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align: justify;">{{ row.get_formatted("custom_item_classication_code", row) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ row.get_formatted("description", row) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px; padding-left:-50px;">
                  {% for row in doc.items %}
                  <div style=" -webkit-box-pack: justify; text-align:center; margin-bottom: 10px;">{{ row.get_formatted("gst_hsn_code", row) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style=" text-align:right; margin-bottom: 10px; -webkit-box-pack: justify;">
                     {{ row.qty | abs }}  {{ row.uom }}
                  </div>
                  {% endfor %}
               </td>
               <!--<td style="font-size:10px;">-->
               <!--    {% for row in doc.items %}-->
               <!--    <div style="margin-bottom:  10px; -webkit-box-pack: justify; text-align:right;">{{ row.qty }}</div>-->
               <!--    {% endfor %}-->
               <!--</td>-->
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ "%.2f"|format(row.rate) }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify;">{{ row.uom }}</div>
                  {% endfor %}
               </td>
               <td style="font-size:10px;">
                  {% for row in doc.items %}
                  <div style="margin-bottom: 10px; -webkit-box-pack: justify; text-align:right;">{{ "{:,.2f}".format(row.amount | abs) }}</div>
                  {% endfor %}
               </td>
            </tr>
         </tbody>
         <tr style="height: 0px;">
            <td colspan="4" style="text-align:right; font-size:12px;"><b>Total :</b></td>
            <td style="font-size: 10px; text-align:right;">    <b>{{ "{:,.0f}".format(doc.total_qty | abs) }}</b></td>
            <td></td>
            <td></td>
            <td style="font-size: 10px;text-align:right;"><b>{{ "{:,.2f}".format(doc.total | abs) }}</b></td>
         </tr>
         
                  <tr>
           <td colspan="4" rowspan="6" style="font-size:10px; margin:0; border-right: 2px solid black !important;  padding-bottom:10px; width:50%;">
        <!--edited here        -->
                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px; padding-right:5px;">Bill Details</p>
               
                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Bill Type &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Number &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bill Date &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Amount Adjusted</p>
                <p style="border:1px solid black; border-bottom:none; margin:0; padding:5px;">Private&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.return_against}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;{{doc.custom_invoice_date}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>
                <p style="border:1px solid black; margin:0; padding:5px;">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                Total:&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.total | abs}}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{doc.grand_total | abs}}</p>
              <p style="font-size:9px;">
E-Invoice Date & Time : {{ doc.get_formatted("posting_date", doc) }} 
{% set time_str = doc.posting_time|string %}
{% set time = time_str[:8] %}
{% set hours = time[:2]|int %}
{% set am_pm = "AM" if hours < 12 else "PM" %}
{% set formatted_hours = hours if 1 <= hours <= 12 else (hours - 12 if hours > 12 else 12) %}
{{ "{:02d}:{} {}".format(formatted_hours, time[3:], am_pm) }}
</p>

              <p style="font-size:9px;">IRN : 
              {%if doc.irn%}
              {{doc.irn}}
              {%endif%}
              </p>
              <p style="font-size:9px;">GST Amount in Words : {{doc.in_words}}</p>
         </tr>
         <tr>
            <tr>
                 <td colspan="5" style="font-size:10px; width:10%;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;Total Amount :  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;
                  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ "{:,.2f}".format(doc.total | abs) }}</td>
                
             </tr>
            <!--<td ></td>-->
            <td colspan="5"  style="font-size:10px; margin-top:20px; margin-left:0;">
               <p>
                  Total CGST Amount &nbsp;&nbsp;&nbsp;&nbsp;
                  <b>
                  {% for tax in doc.taxes %}
                  {% if "CGST" in tax.account_head %}
                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>
                  {% endif %}
                  {% endfor %}
                  </b>
               </p>
               <p>Total SGST Amount  &nbsp;&nbsp;&nbsp;
                  <b>{% for tax in doc.taxes %}
                  {% if "SGST" in tax.account_head %}
                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>
                  {% endif %}
                  {% endfor %}</b>
               </p>
               <p>Total IGST Amount 
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  <b> {% for tax in doc.taxes %}
                  {% if "IGST" in tax.account_head %}
                  @&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ tax.rate }}%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>{{ "{:,.2f}".format(tax.tax_amount | abs) }}</b>
                  {% endif %}
                  {% endfor %}</b>
               </p>
            </td>
         </tr>
          <tr>
            <!--<td colspan="4" style="border-top: 2px solid white !important;"></td>-->
            <td colspan="4" style="font-size:10px;"><b>Total GST Amount</b> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               <b>{{"{:,.2f}".format(doc.total_taxes_and_charges | abs)}}</b>
            </td>
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
         <tr>
            <!--<td colspan="4"></td>-->
            <!--<td colspan="4">Taxable Amount 223,300.00</td>-->
         </tr>
        
          
         <tr>
            <td colspan="4" style="font-size:10px; margin:0; padding:0;">
               <p>Total Amount (in Words) Rs.  &nbsp;&nbsp;&nbsp;{{doc.in_words}}
               </p>
            </td>
            <td colspan="4" style="font-size:10px; margin:0; padding:0;"><b>&nbsp;&nbsp;&nbsp;&nbsp;Amount After Tax:</b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               <b> {{"{:,.2f}".format(doc.grand_total | abs)}}</b>
            </td>
         </tr>
         
      </table>
     
      <div class="Discription">
         <div>
            <h6 style="font-size:10px;">Reason For Issuing Document:&nbsp;&nbsp; 04-Correction in Invoice</h6>
           <p>Narration: &nbsp;&nbsp; BEING CREDIT NOTE NO. CN/S/0017/24-25 A/G INVOICENO UL/0506/24-25 DT 12/09/2024</p>
            <div style="padding-top:55px; padding-left:-100px;">
             <p><b>Generated By :</b> 
               {% if doc.custom_creator_by %}
               {{ doc.custom_creator_by }} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
               {% endif %}
               <b>Generated On:</b> {{ doc.get_formatted("creation") }}
            </p>
         </div>
         </div>
        
         <div style="padding-right:10px;">
            <p>For UNIQUE LABELS</p>
            <img style="width:86px;" src="/files/UNique Labels.png" alt=" " />
            <p>Authorised Signatory</p>
         </div>
      </div>
      <h5 style="text-align: center; margin:0; padding:0; font-size:9px;">This is computer-generated document and no signature is required</h5>
   </div>
   
   </body>
   {% endif %}
   
  
</html>